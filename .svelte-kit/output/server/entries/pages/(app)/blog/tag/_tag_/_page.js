import{b as m,g as f}from"../../../../../../chunks/posts.js";import{s as u}from"../../../../../../chunks/config.js";import{error as r}from"@sveltejs/kit";import{i as P}from"../../../../../../chunks/vendor.js";const v=!0;async function T(){return m().filter(s=>s).map(s=>({tag:s.slug}))}async function k({params:c,url:s}){const g=c.tag;g||r(400,"Thẻ không hợp lệ.");const t=m().find(e=>e.slug===g);t||r(404,`Không tìm thấy thẻ "${g}".`);const i={title:t.name,slug:t.slug,count:t.count,description:`Có ${t.count} bài viết với thẻ "${t.name}"`},n=P?null:s.searchParams.get("page"),a=n&&!isNaN(Number(n))&&Number(n)>0?Number(n):1,l=u.pagination.postsPerPage,h=(a-1)*l;try{const{posts:e,total:p,totalPages:o}=f({offset:h,limit:l,tag:i.title});return a>o&&o>0&&r(404,`Trang ${a} không tồn tại trong thẻ "${i.title}".`),{tag:i,posts:e,pagination:{currentPage:a,totalPages:o,totalPosts:p,hasPrev:a>1,hasNext:a<o},site:u}}catch(e){console.error("Error loading Tag page:",e),r(500,"Không thể tải bài viết theo thẻ này.")}}export{T as entries,k as load,v as prerender};
