import{g as p}from"../../../../chunks/posts.js";import{s}from"../../../../chunks/config.js";import{error as c}from"@sveltejs/kit";import{i as m}from"../../../../chunks/vendor.js";const u=!0;async function b({url:a,depends:e}){e("blog:list");try{const t=s.pagination.postsPerPage,i=m?null:a.searchParams.get("page");let o=parseInt(i||"1");(isNaN(o)||o<1)&&(o=1);const n=(o-1)*t,{posts:l,total:r,totalPages:g}=p({offset:n,limit:t});return{posts:l,pagination:{currentPage:o,totalPages:g||Math.ceil(r/t),totalPosts:r,baseUrl:"/blog"},site:s}}catch(t){console.error("Error loading post list:",t),c(500,"Không thể tải danh sách posts.")}}export{b as load,u as prerender};
